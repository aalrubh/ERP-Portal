@use './../../../../../shared/styles/styles.scss' as *;

/* Tweakables */
$menu-open: 275px;
$menu-closed: 50px;
$ease: 200ms ease;

/* Root styles for animation perf */
.menu-item {
	width: $menu-open;
	display: flex;
	align-items: center;
	justify-content: flex-start;
	gap: 12px;
	border: 0;
	background: transparent;
	color: $text-color;
	padding: 12px 14px;
	cursor: pointer;
	text-align: left;
	overflow: hidden;

	/* One transition block */
	transition: width $ease, gap $ease, padding $ease, background 160ms ease, color 160ms ease;

	&:hover {
		background: $surface-color;
	}

	&:focus-visible {
		outline: 2px solid $text-color;
		outline-offset: 2px;
		border-radius: 6px;
	}

	.icon {
		width: 20px;
		height: 20px;
		flex: 0 0 20px;
		/* object-fit not needed for inline SVG; fine for raster icons */
	}

	.menu-item-title {
		font-size: 14px;
		font-weight: 600;
		line-height: 1;
		letter-spacing: 0.2px;
		color: $text-color;
		white-space: nowrap;
		margin-inline-end: auto;
		/* animate instead of display:none */
		opacity: 1;
		transform: translateX(0);
		transition: opacity 140ms ease, transform $ease;
	}

	.arrow {
		width: 16px;
		height: 16px;
		transition: transform 160ms ease, opacity 160ms ease;
		opacity: 1;
		transform: translateX(0);

		&.open {
			transform: rotate(180deg);

		}
	}
}

/* Collapsed state: animate width, not max-width */
.menu-item.closed {
	width: $menu-closed;
	gap: 0;
	/* keep horizontal padding so icon stays centered-ish */
	padding-inline: 14px;

	.menu-item-title,
	.arrow {
		opacity: 0;
		transform: translateX(-8px);
		pointer-events: none;
		/* behave like hidden */
	}
}

/* Submenu animation */
.submenu {
	list-style: none;
	margin: 0;
	padding: 2px 0 6px;
	overflow: hidden;
	/* helps during slide-out */

	&.slide-in {
		animation: subMenuSlide 240ms ease forwards;
	}

	&.slide-out {
		animation: subMenuSlide 180ms ease reverse;
	}
}

@keyframes subMenuSlide {
	from {
		opacity: 0;
		transform: translateY(-8px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}